import l from"i18next";import{Store as m}from"pullstate";var a=new m({locale:null});var e={languages:[],localeFromPhone:null,defaultFallback:null,locale:null},i={translations:[]},s=t=>t&&!i.translations.includes(t)?(console.warn(`Locale "${t}" not found`),null):(e.locale=t,l.changeLanguage(t,()=>{a.update(n=>{n.locale=t})}),t),L=async({localeFromPhone:t,languages:n,defaultFallback:c=null,debug:u=!1})=>{e.languages=n.map(o=>({locale:o.locale,meta:o.meta})),e.localeFromPhone=await t();let r={compatibilityJSON:"v3",lng:c,debug:u,resources:{}};for(let o of n)r.resources[o.locale]={translation:o.translations},i.translations.push(o.locale);return await l.init(r),s(e.localeFromPhone)},p=t=>e.languages.map(n=>({selected:t===n.locale,...n})),S=()=>{let t=a.useState(n=>n.locale||e.defaultFallback);return{getLanguages:()=>p(t),locale:t,t:l.t,changeLocale:s}};export{s as changeLocale,L as initialization,S as useIntl};
