import l from"i18next";import{Store as g}from"pullstate";var a=new g({locale:null});var o={languages:[],localeFromPhone:null,defaultFallback:null,locale:null},s={translations:[]},i=n=>n&&!s.translations.includes(n)?(console.warn(`Locale "${n}" not found`),null):(o.locale=n,l.changeLanguage(n,()=>{a.update(t=>{t.locale=n})}),n),S=async({localeFromPhone:n,languages:t,defaultFallback:c=null,debug:u=!1})=>{o.localeFromPhone=n();let r={compatibilityJSON:"v3",lng:c,debug:u,resources:{}};for(let e of t)r.resources[e.locale]={translation:e.translations},s.translations.push(e.locale);return await l.init(r),i(o.localeFromPhone)},p=n=>(console.warn("dbg:options.languages",o.languages),o.languages.map(t=>({selected:n===t.locale,...t}))),F=()=>{let n=a.useState(t=>t.locale||o.defaultFallback);return{getLanguages:()=>p(n),locale:n,t:l.t,changeLocale:i}};export{i as changeLocale,S as initialization,F as useIntl};
