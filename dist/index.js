var g=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var d=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var b=(o,n)=>{for(var a in n)c(o,a,{get:n[a],enumerable:!0})},f=(o,n,a,s)=>{if(n&&typeof n=="object"||typeof n=="function")for(let l of F(n))!L.call(o,l)&&l!==a&&c(o,l,{get:()=>n[l],enumerable:!(s=m(n,l))||s.enumerable});return o};var h=(o,n,a)=>(a=o!=null?g(d(o)):{},f(n||!o||!o.__esModule?c(a,"default",{value:o,enumerable:!0}):a,o)),k=o=>f(c({},"__esModule",{value:!0}),o);var w={};b(w,{changeLocale:()=>u,initialization:()=>I,useIntl:()=>S});module.exports=k(w);var r=h(require("format-message"));var p=require("pullstate"),i=new p.Store({locale:null});var t={languages:[],localeFromPhone:null,defaultFallback:null,locale:null},e={translations:{}},u=o=>o&&!e.translations[o]?(console.warn(`Locale "${o}" not found`),null):(t.locale=o,(0,r.setup)({locale:t.locale,translations:e.translations[t.locale]}),i.update(n=>{n.locale=o}),o),I=({localeFromPhone:o,languages:n,defaultFallback:a=null})=>{if(t.localeFromPhone=o(),!n||!Array.isArray(n)||n.length===0){console.warn("No language packs found");return}for(let s of n){let l=s;if(!l.locale){console.warn("Check language pack for locales");continue}if(!l.translations){console.warn(`Not found "translations" object in ${l.locale} locale`);continue}t.languages.push({locale:l.locale,meta:l.meta}),t.defaultFallback||(t.defaultFallback=l.locale),e.translations[l.locale]=l.translations}return a&&!e.translations[a]?console.warn("Fallback language not found in language packs"):a&&(t.defaultFallback=a),console.warn("dbg:buffer.translations",t),r.default.setup({locale:t.defaultFallback,translations:e.translations[t.defaultFallback]}),u(t.localeFromPhone)},S=()=>{let o=i.useState(a=>a.locale||t.defaultFallback);return{getLanguages:()=>t.languages.map(a=>({selected:o===a.locale,...a})),locale:o,t:r.default,changeLocale:u}};0&&(module.exports={changeLocale,initialization,useIntl});
