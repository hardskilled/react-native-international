var g=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var d=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var L=(o,n)=>{for(var a in n)c(o,a,{get:n[a],enumerable:!0})},f=(o,n,a,s)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of F(n))!b.call(o,t)&&t!==a&&c(o,t,{get:()=>n[t],enumerable:!(s=m(n,t))||s.enumerable});return o};var h=(o,n,a)=>(a=o!=null?g(d(o)):{},f(n||!o||!o.__esModule?c(a,"default",{value:o,enumerable:!0}):a,o)),I=o=>f(c({},"__esModule",{value:!0}),o);var w={};L(w,{changeLocale:()=>u,initialization:()=>S,useIntl:()=>k});module.exports=I(w);var r=h(require("format-message"));var p=require("pullstate"),i=new p.Store({locale:null});var l={languages:[],localeFromPhone:null,defaultFallback:null,locale:null},e={translations:{}},u=o=>o&&!e.translations[o]?(console.warn(`Locale "${o}" not found`),null):(l.locale=o,console.warn("dbg:000",[l.locale,e.translations[l.locale]]),(0,r.setup)({locale:l.locale,translations:e.translations[l.locale]}),i.update(n=>{n.locale=o}),o),S=({localeFromPhone:o,languages:n,defaultFallback:a=null})=>{if(l.localeFromPhone=o(),!(!n||!Array.isArray(n)||n.length===0)){for(let s of n){let t=s;if(!t.locale){console.warn("Check language pack for locales");continue}if(!t.translations){console.warn(`Not found "translations" object in ${t.locale} locale`);continue}l.languages.push({locale:t.locale,meta:t.meta}),l.defaultFallback||(l.defaultFallback=t.locale),e.translations[t.locale]=t.translations}return a&&!e.translations[a]?console.warn("Fallback language not found in language packs"):a&&(l.defaultFallback=a),console.warn("dbg:buffer.translations",l),r.default.setup({locale:l.defaultFallback,translations:e.translations[l.defaultFallback]}),u(l.localeFromPhone)}},k=()=>{let o=i.useState(a=>a.locale||l.defaultFallback);return{getLanguages:()=>l.languages.map(a=>({selected:o===a.locale,...a})),locale:o,t:r.default,changeLocale:u}};0&&(module.exports={changeLocale,initialization,useIntl});
