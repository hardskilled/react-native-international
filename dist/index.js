var p=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var L=(o,n)=>{for(var t in n)c(o,t,{get:n[t],enumerable:!0})},f=(o,n,t,s)=>{if(n&&typeof n=="object"||typeof n=="function")for(let l of d(n))!b.call(o,l)&&l!==t&&c(o,l,{get:()=>n[l],enumerable:!(s=m(n,l))||s.enumerable});return o};var h=(o,n,t)=>(t=o!=null?p(F(o)):{},f(n||!o||!o.__esModule?c(t,"default",{value:o,enumerable:!0}):t,o)),I=o=>f(c({},"__esModule",{value:!0}),o);var U={};L(U,{changeLocale:()=>u,initialization:()=>S,useIntl:()=>w});module.exports=I(U);var r=h(require("format-message"));var g=require("pullstate"),i=new g.Store({locale:null});var a={languages:[],localeFromPhone:null,defaultFallback:null,locale:null},e={translations:{}},u=o=>o&&!e.translations[o]?(console.warn(`Locale "${o}" not found`),null):(a.locale=o,console.warn("dbg:000",[a.locale,e.translations[a.locale]]),r.default.setup({locale:a.locale,translations:e.translations[a.locale]}),console.warn("dbg:vvv",(0,r.default)("dailer")),i.update(n=>{n.locale=o}),o),S=({localeFromPhone:o,languages:n,defaultFallback:t=null})=>{if(a.localeFromPhone=o(),!(!n||!Array.isArray(n)||n.length===0)){for(let s of n){let l=s;if(!l.locale){console.warn("Check language pack for locales");continue}if(!l.translations){console.warn(`Not found "translations" object in ${l.locale} locale`);continue}a.languages.push({locale:l.locale,meta:l.meta}),a.defaultFallback||(a.defaultFallback=l.locale),e.translations[l.locale]=l.translations}return t&&!e.translations[t]?console.warn("Fallback language not found in language packs"):t&&(a.defaultFallback=t),console.warn("dbg:buffer.translations",a),r.default.setup({locale:a.defaultFallback,translations:e.translations[a.defaultFallback]}),u(a.localeFromPhone)}},k=o=>a.languages.map(n=>({selected:o===n.locale,...n})),w=()=>{let o=i.useState(n=>n.locale||a.defaultFallback);return{getLanguages:()=>k(o),locale:o,t:r.default,changeLocale:u}};0&&(module.exports={changeLocale,initialization,useIntl});
