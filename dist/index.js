var g=Object.create;var r=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var I=(a,o)=>{for(var t in o)r(a,t,{get:o[t],enumerable:!0})},f=(a,o,t,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of d(o))!k.call(a,n)&&n!==t&&r(a,n,{get:()=>o[n],enumerable:!(s=F(o,n))||s.enumerable});return a};var L=(a,o,t)=>(t=a!=null?g(b(a)):{},f(o||!a||!a.__esModule?r(t,"default",{value:a,enumerable:!0}):t,a)),h=a=>f(r({},"__esModule",{value:!0}),a);var x={};I(x,{changeLocale:()=>u,initialization:()=>S,useIntl:()=>U});module.exports=h(x);var m=L(require("format-message"));var p=require("pullstate"),i=new p.Store({locale:null});var c=m.default.namespace(),l={languages:[],localeFromPhone:null,defaultFallback:null,locale:null},e={current:null,namespaces:{},translations:{}},u=a=>a&&!e.translations[a]?(console.warn(`Locale "${a}" not found`),null):(l.locale=a,c.setup({locale:l.locale,translations:e.translations[l.locale]}),console.warn("dbg:vvv",c.setup({locale:l.locale,translations:e.translations[l.locale]})),i.update(o=>{o.locale=a}),a),S=({localeFromPhone:a,languages:o,defaultFallback:t=null})=>{if(l.localeFromPhone=a(),!(!o||!Array.isArray(o)||o.length===0)){for(let s of o){let n=s;if(!n.locale){console.warn("Check language pack for locales");continue}if(!n.translations){console.warn(`Not found "translations" object in ${n.locale} locale`);continue}l.languages.push({locale:n.locale,meta:n.meta}),l.defaultFallback||(l.defaultFallback=n.locale),e.translations[n.locale]=n.translations}return t&&!e.translations[t]?console.warn("Fallback language not found in language packs"):t&&(l.defaultFallback=t),console.warn("dbg:buffer.translations",{locale:l.defaultFallback,translations:e.translations[l.defaultFallback]}),c.setup({locale:l.defaultFallback,translations:e.translations[l.defaultFallback]}),u(l.localeFromPhone)}},w=a=>l.languages.map(o=>({selected:a===o.locale,...o})),U=()=>{let a=i.useState(o=>o.locale||l.defaultFallback);return{getLanguages:()=>w(a),locale:a,t:c,changeLocale:u}};0&&(module.exports={changeLocale,initialization,useIntl});
