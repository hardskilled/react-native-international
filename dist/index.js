(()=>{var g=Object.create;var i=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var u=(a=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(a,{get:(o,t)=>(typeof require<"u"?require:o)[t]}):a)(function(a){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+a+'" is not supported')});var I=(a,o,t,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of d(o))!k.call(a,n)&&n!==t&&i(a,n,{get:()=>o[n],enumerable:!(s=F(o,n))||s.enumerable});return a};var L=(a,o,t)=>(t=a!=null?g(b(a)):{},I(o||!a||!a.__esModule?i(t,"default",{value:a,enumerable:!0}):t,a));var p=L(u("format-message"));var f=u("pullstate"),c=new f.Store({locale:null});var r=p.default.namespace(),l={languages:[],localeFromPhone:null,defaultFallback:null,locale:null},e={current:null,namespaces:{},translations:{}},m=a=>a&&!e.translations[a]?(console.warn(`Locale "${a}" not found`),null):(l.locale=a,r.setup({locale:l.locale,translations:e.translations[l.locale]}),console.warn("dbg:vvv",r.setup({locale:l.locale,translations:e.translations[l.locale]})),c.update(o=>{o.locale=a}),a),x=({localeFromPhone:a,languages:o,defaultFallback:t=null})=>{if(l.localeFromPhone=a(),!(!o||!Array.isArray(o)||o.length===0)){for(let s of o){let n=s;if(!n.locale){console.warn("Check language pack for locales");continue}if(!n.translations){console.warn(`Not found "translations" object in ${n.locale} locale`);continue}l.languages.push({locale:n.locale,meta:n.meta}),l.defaultFallback||(l.defaultFallback=n.locale),e.translations[n.locale]=n.translations}return t&&!e.translations[t]?console.warn("Fallback language not found in language packs"):t&&(l.defaultFallback=t),console.warn("dbg:buffer.translations",{locale:l.defaultFallback,translations:e.translations[l.defaultFallback]}),r.setup({locale:l.defaultFallback,translations:e.translations[l.defaultFallback]}),m(l.localeFromPhone)}},h=a=>l.languages.map(o=>({selected:a===o.locale,...o})),v=()=>{let a=c.useState(o=>o.locale||l.defaultFallback);return{getLanguages:()=>h(a),locale:a,t:r,changeLocale:m}};})();
