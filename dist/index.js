var g=Object.create;var r=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var I=(a,o)=>{for(var t in o)r(a,t,{get:o[t],enumerable:!0})},f=(a,o,t,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let l of d(o))!k.call(a,l)&&l!==t&&r(a,l,{get:()=>o[l],enumerable:!(s=F(o,l))||s.enumerable});return a};var L=(a,o,t)=>(t=a!=null?g(b(a)):{},f(o||!a||!a.__esModule?r(t,"default",{value:a,enumerable:!0}):t,a)),S=a=>f(r({},"__esModule",{value:!0}),a);var x={};I(x,{changeLocale:()=>u,initialization:()=>h,useIntl:()=>U});module.exports=S(x);var m=L(require("format-message"));var p=require("pullstate"),i=new p.Store({locale:null});var c=m.default.namespace(),n={languages:[],localeFromPhone:null,defaultFallback:null,locale:null},e={current:null,namespaces:{},translations:{}},u=a=>a&&!e.translations[a]?(console.warn(`Locale "${a}" not found`),null):(n.locale=a,c.setup({locale:n.locale,translations:e.translations[n.locale]}),console.warn("dbg:vvv",c.setup({locale:n.locale,translations:e.translations[n.locale]})),i.update(o=>{o.locale=a}),a),h=({localeFromPhone:a,languages:o,defaultFallback:t=null})=>{if(n.localeFromPhone=a(),!(!o||!Array.isArray(o)||o.length===0)){for(let s of o){let l=s;if(!l.locale){console.warn("Check language pack for locales");continue}if(!l.translations){console.warn(`Not found "translations" object in ${l.locale} locale`);continue}n.languages.push({locale:l.locale,meta:l.meta}),n.defaultFallback||(n.defaultFallback=l.locale),e.translations[l.locale]=l.translations}return t&&!e.translations[t]?console.warn("Fallback language not found in language packs"):t&&(n.defaultFallback=t),console.warn("dbg:buffer.translations",{locale:n.defaultFallback,translations:e.translations[n.defaultFallback]}),c.setup({locale:n.defaultFallback,translations:e.translations[n.defaultFallback]}),u(n.localeFromPhone)}},w=a=>n.languages.map(o=>({selected:a===o.locale,...o})),U=()=>{let a=i.useState(o=>o.locale||n.defaultFallback);return{getLanguages:()=>w(a),locale:a,t:c,changeLocale:u}};0&&(module.exports={changeLocale,initialization,useIntl});
