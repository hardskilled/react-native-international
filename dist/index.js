var g=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var d=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var h=(o,a)=>{for(var n in a)c(o,n,{get:a[n],enumerable:!0})},f=(o,a,n,s)=>{if(a&&typeof a=="object"||typeof a=="function")for(let l of F(a))!b.call(o,l)&&l!==n&&c(o,l,{get:()=>a[l],enumerable:!(s=m(a,l))||s.enumerable});return o};var k=(o,a,n)=>(n=o!=null?g(d(o)):{},f(a||!o||!o.__esModule?c(n,"default",{value:o,enumerable:!0}):n,o)),I=o=>f(c({},"__esModule",{value:!0}),o);var w={};h(w,{changeLocale:()=>u,initialization:()=>L,useIntl:()=>S});module.exports=I(w);var r=k(require("format-message"));var p=require("pullstate"),i=new p.Store({locale:null});var t={languages:[],localeFromPhone:null,defaultFallback:null,locale:null},e={translations:{}},u=o=>o&&!e.translations[o]?null:(t.locale=o,(0,r.setup)({locale:t.locale,translations:e.translations[t.locale]}),i.update(a=>{a.locale=o}),o),L=({localeFromPhone:o,languages:a,defaultFallback:n=null})=>{if(t.localeFromPhone=o(),!a||!Array.isArray(a)||a.length===0){console.warn("No language packs found");return}for(let s of a){let l=s;if(!l.locale){console.warn("Check language pack for locales");continue}if(!l.translations){console.warn(`Not found "translations" object in ${l.locale} locale`);continue}t.languages.push({locale:l.locale,meta:l.meta}),t.defaultFallback||(t.defaultFallback=l.locale),e.translations[l.locale]=l.translations}return n&&!e.translations[n]?console.warn("Fallback language not found in language packs"):n&&(t.defaultFallback=n),console.warn("dbg:buffer.translations",e.translations),r.default.setup({locale:t.defaultFallback,translations:e.translations[t.defaultFallback]}),u(t.localeFromPhone)},S=()=>{let o=i.useState(n=>n.locale||t.defaultFallback);return{getLanguages:()=>t.languages.map(n=>({selected:o===n.locale,...n})),locale:o,t:r.default,changeLocale:u}};0&&(module.exports={changeLocale,initialization,useIntl});
